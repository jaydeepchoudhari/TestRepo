# Input and output file paths
$inputFile = "result.txt"
$outputFile = "map.txt"

# Clear output if exists
if (Test-Path $outputFile) {
    Clear-Content $outputFile
}

# Regex to capture old_id and new_id numbers
$regex = "old_id=(\d+)\s+new_id=(\d+)"

# Read result.txt line by line
Get-Content $inputFile | ForEach-Object {

    if ($_ -match $regex) {
        $oldId = $matches[1]
        $newId = $matches[2]

        # Write in format: oldId$newId
        Add-Content -Path $outputFile -Value "$oldId`$$newId"
    }
}

Write-Host "Mapping extraction complete. Check map.txt"
